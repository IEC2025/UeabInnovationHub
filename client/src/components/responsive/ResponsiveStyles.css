/* Advanced Responsive Design System */

/* CSS Container Queries for modern responsive design */
.responsive-container {
  container-type: inline-size;
  position: relative;
}

/* Fluid typography system using CSS clamp() */
.fluid-text {
  font-size: var(--fluid-font-size, 1rem);
  line-height: var(--fluid-line-height, 1.5);
}

/* Dynamic spacing based on container size */
@container (max-width: 320px) {
  .responsive-spacing { padding: 0.5rem; }
  .responsive-gap { gap: 0.5rem; }
}

@container (min-width: 321px) and (max-width: 640px) {
  .responsive-spacing { padding: 1rem; }
  .responsive-gap { gap: 0.75rem; }
}

@container (min-width: 641px) and (max-width: 1024px) {
  .responsive-spacing { padding: 1.5rem; }
  .responsive-gap { gap: 1rem; }
}

@container (min-width: 1025px) {
  .responsive-spacing { padding: 2rem; }
  .responsive-gap { gap: 1.5rem; }
}

/* Performance-optimized animations */
.smooth-transition {
  transition: all var(--animation-duration, 0.3s) cubic-bezier(0.4, 0, 0.2, 1);
  will-change: transform, opacity;
  backface-visibility: hidden;
}

/* Touch-optimized interactions */
.touch-target {
  min-height: 44px;
  min-width: 44px;
  touch-action: manipulation;
}

/* Gesture-friendly slider controls */
.gesture-slider {
  touch-action: pan-y pinch-zoom;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-x: contain;
}

/* Advanced grid system with container queries */
.responsive-grid {
  display: grid;
  gap: var(--responsive-gap, 1rem);
}

@container (max-width: 640px) {
  .responsive-grid { grid-template-columns: 1fr; }
}

@container (min-width: 641px) and (max-width: 1024px) {
  .responsive-grid { grid-template-columns: repeat(2, 1fr); }
}

@container (min-width: 1025px) {
  .responsive-grid { grid-template-columns: repeat(3, 1fr); }
}

/* Accessibility enhancements */
@media (prefers-reduced-motion: reduce) {
  .smooth-transition {
    transition-duration: 0.01ms !important;
  }
  
  .animated-element {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    scroll-behavior: auto !important;
  }
}

@media (prefers-contrast: high) {
  .responsive-container {
    filter: contrast(1.2);
  }
}

/* Dark mode optimizations */
@media (prefers-color-scheme: dark) {
  .responsive-container {
    --shadow-color: rgba(255, 255, 255, 0.1);
  }
}

/* Network-aware optimizations */
.slow-connection .heavy-animation {
  animation: none !important;
  transition: none !important;
}

.slow-connection .blur-effect {
  backdrop-filter: none !important;
  filter: none !important;
}

/* Modern CSS features with fallbacks */
@supports (aspect-ratio: 16/9) {
  .modern-aspect-ratio {
    aspect-ratio: var(--aspect-ratio, 16/9);
    height: auto;
  }
}

@supports not (aspect-ratio: 16/9) {
  .modern-aspect-ratio {
    height: 0;
    padding-bottom: 56.25%; /* 16:9 fallback */
    position: relative;
  }
  
  .modern-aspect-ratio > * {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
}

@supports (backdrop-filter: blur(10px)) {
  .modern-backdrop {
    backdrop-filter: blur(var(--blur-amount, 10px));
    background-color: rgba(255, 255, 255, 0.1);
  }
}

@supports not (backdrop-filter: blur(10px)) {
  .modern-backdrop {
    background-color: rgba(255, 255, 255, 0.3);
  }
}

/* Advanced hover states with 3D transforms */
.enhanced-hover {
  transform-style: preserve-3d;
  transition: transform var(--animation-duration, 0.3s) ease-out;
}

.enhanced-hover:hover {
  transform: perspective(1000px) rotateX(2deg) rotateY(5deg) translateZ(20px);
}

/* Intersection observer optimizations */
.in-viewport {
  animation-play-state: running;
  will-change: transform, opacity;
}

.out-of-viewport {
  animation-play-state: paused;
  will-change: auto;
}

/* Responsive typography scale */
.fluid-heading-xl {
  font-size: clamp(2.5rem, 4vw + 1rem, 5rem);
  line-height: 1.1;
}

.fluid-heading-lg {
  font-size: clamp(2rem, 3vw + 1rem, 3.5rem);
  line-height: 1.2;
}

.fluid-heading-md {
  font-size: clamp(1.5rem, 2.5vw + 1rem, 2.5rem);
  line-height: 1.3;
}

.fluid-text-lg {
  font-size: clamp(1.125rem, 1vw + 1rem, 1.5rem);
  line-height: 1.6;
}

/* Smart image loading */
.smart-image {
  transition: opacity var(--animation-duration, 0.3s) ease-in-out;
}

.smart-image.loading {
  opacity: 0.3;
  filter: blur(5px);
}

.smart-image.loaded {
  opacity: 1;
  filter: blur(0);
}

/* Performance monitoring styles */
.performance-indicator {
  position: fixed;
  top: 1rem;
  right: 1rem;
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 0.5rem;
  border-radius: 0.25rem;
  font-family: monospace;
  font-size: 0.75rem;
  z-index: 9999;
  pointer-events: none;
}

/* Custom scrollbar for webkit browsers */
.custom-scroll::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.custom-scroll::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.1);
  border-radius: 4px;
}

.custom-scroll::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.3);
  border-radius: 4px;
}

.custom-scroll::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.5);
}